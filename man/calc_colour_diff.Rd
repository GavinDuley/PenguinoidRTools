% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/cielab.funct.R
\name{calc_colour_diff}
\alias{calc_colour_diff}
\title{Calculate centroid-to-centroid colour differences}
\usage{
calc_colour_diff(
  data,
  compare_by = "EtOH",
  reference_level = "CTRL",
  group_by = NULL
)
}
\arguments{
\item{data}{A data.frame containing CIELab colour data with columns
\code{CIELab_L}, \code{CIELab_a}, and \code{CIELab_b}}

\item{compare_by}{Character name of the column containing the factor
to compare (default: "EtOH")}

\item{reference_level}{Character value within \code{compare_by} to use
as the reference for comparisons (default: "CTRL")}

\item{group_by}{Character vector of column names to group by before
computing centroids. Use this for nested designs (e.g., group_by = "Wine"
to compute separate differences for each wine). NULL for no grouping.}
}
\value{
A data.frame with columns:
  \describe{
    \item{<group_by columns>}{Grouping variables (if specified)}
    \item{<compare_by>}{The comparison level}
    \item{contrast}{Character description of the comparison (e.g., "Treatment â€“ CTRL")}
    \item{dL}{Difference in L* (lightness)}
    \item{dC}{Difference in C* (chroma)}
    \item{dh}{Signed difference in hue angle (degrees)}
    \item{dE76_cent}{CIE76 Delta E between centroids}
    \item{dE00_cent}{CIE2000 Delta E between centroids}
  }
}
\description{
Computes colour differences between group centroids in CIELab space.
This function calculates the mean L*, a*, b* values for each group and
then computes differences (deltaL, deltaC, deltaH, deltaE76, deltaE00)
between a reference level and all other levels.
}
\details{
This function is useful for comparing colour changes between experimental
conditions by reducing multiple observations to their centroids first.
This approach is robust to outliers and gives a single summary value
per comparison.

The function requires the \pkg{farver} package for CIE2000 calculations.
}
\examples{
\dontrun{
# Compare ethanol treatments to control
results <- calc_colour_diff(
  data = wine_colours,
  compare_by = "EtOH",
  reference_level = "CTRL"
)

# Compare within each wine variety
results <- calc_colour_diff(
  data = wine_colours,
  compare_by = "Treatment",
  reference_level = "Control",
  group_by = "WineType"
)
}

}
\seealso{
\code{\link{calc_pairwise_dE}} for observation-level comparisons
}
